<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>E2ForLife_W5100: Interface Driver For the WIZnet W5100 Device</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="e2_logo2.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">E2ForLife_W5100
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Driver Component for Use of the W5100 device</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Interface Driver For the WIZnet W5100 Device </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="feature_sec"></a>
Features</h1>
<dl class="section user"><dt></dt><dd><ul>
<li>Compatible with PSoC 3, 4, 5, and 5LP </li>
<li>SPI port independant </li>
<li>Supports Hardware TCP, UDP and ARP </li>
<li>Small FLASH footprint </li>
</ul>
</dd></dl>
<h1><a class="anchor" id="intro_sec"></a>
General Description</h1>
<p>The W5100 interface driver provides a simple software driver for using the WIZnet W5100 iEthernet controller with a PSoC project. The driver can be customized to support many system configurations, and allows for SPI port sharing. Both the SPIM and the SCB interfaces are supported to allow the driver to support many hardware configurations of the application. </p>
<h1><a class="anchor" id="using_sec"></a>
Using the W5100 Driver</h1>
<h2><a class="anchor" id="sch_req_subsec"></a>
Schematic Requirements</h2>
<p>This driver is a software only driver, thus in order to effectively use the functions provided to access the W5100, there must be a hadrware interface defined in the schematics to access the device. Once enterend in the schematics, enter the instance name of the SPI component in to the customizer parameters for the driver component. </p>
<h2><a class="anchor" id="using_subsec"></a>
Using The Driver</h2>
<p>When using the driver, simply start the driver with the Start() function then open a socket using the protocol desired, and either start a server to wait for connections or connect to a remote server. The W5100 device and the software driver handle the interfacing, management, and data handling for the connections. </p>
<h1><a class="anchor" id="io_sec"></a>
Input/Output Connections</h1>
<p>There are no Input or Output connections to this component. </p>
<h1><a class="anchor" id="customizer_sec"></a>
Component Parameters</h1>
<h2><a class="anchor" id="comp_param_subsec"></a>
Component Parameters</h2>
<p>Drag a W5100 component on to your design and double-click to open the component configuration dialog. </p>
<div class="image">
<img src="Customizer.png" alt="Customizer.png"/>
</div>
 <h2><a class="anchor" id="param_subsec"></a>
Parameters</h2>
<h3><a class="anchor" id="driver_parm_sub_sub"></a>
Driver Configuration Parameters</h3>
<p>This section contains parameters that modify the operation of the driver, or provide settings for options of the driver implementation. </p>
<ul>
<li><code>CMD_TIMEOUT</code> The number of missiseconds to wait for a W5100 Command to execute <dl class="section user"><dt></dt><dd>This parameter will allow you to set the ammount of time that the internal driver fucntion used to execute socket commands within the W5100 device will wait for a command to execute before declaring a timeout condition. </dd></dl>
</li>
<li><code>INCLUDE_TCP</code> Set to True to enable the TCP interface code <dl class="section user"><dt></dt><dd>a True/False parameter used to specify if the TCP protocol interface code will included when compiling the driver software. Set this to False when ot using the TCP interface functions to save FLASH memory space. The default setting is to include this interface code. </dd></dl>
</li>
<li><code>INCLUDE_UDP</code> Set to True to enable the UDP interface Code <dl class="section user"><dt></dt><dd>A True/False parameter used to specify if the UDP protocol interface code will be compiled when building the library. Set this to False if not using the UDP functions and you wish to save some FLASH memory space. the default setting for this parameter is True. </dd></dl>
</li>
<li><code>INIT_DELAY</code> The number of milliseconds to wait for the W5100 PLL to Lock after a device reset or power on. <dl class="section user"><dt></dt><dd>Usually, this parameter will not need to be modified, however, it allows you to configure the ammount of time that the driver will wait for the W5100 internal PLL to achieve lock. This might need to be adjusted if your power supply is noisy or you are experiencing a high amount of clock jitter at power on. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Adjusting this parameter may cause the W5100 to not respond on the Ethernet port. </dd></dl>
</li>
<li><code>TIMEOUT</code> The number of milliseconds to wait before an operation declares a general timeout <dl class="section user"><dt></dt><dd>This parameter will allow you to adjust the number of milliseconds that an operation will wait for an operation to complete before delaring a timeout condition. This does not affect every function. </dd></dl>
</li>
</ul>
<h3><a class="anchor" id="config_param_sub_sub"></a>
Network Configuration Parameters</h3>
<p>The "configuration" parameters section contains the parameters for initializing the default network configuration for use by the W5100. These parameters can be overridden within your application through the use of the API function calls. </p>
<ul>
<li><code>GATEWAY</code> The IPv4 Address of the network gateway <dl class="section user"><dt></dt><dd>This parameter will allow you to specify the IP address of the ethernet gateway router. This value is a string specified in IPv4 format of <code>www.xxx.yyy.zzz</code> </dd></dl>
</li>
<li><code>IP</code> The IPv4 Address of the device <dl class="section user"><dt></dt><dd>The network address of the W5100 device. This address is the configured address of the controller after the API Start() call executes. Setting this will change the fixed IP of the system. </dd></dl>
</li>
<li><code>MAC</code> The hardware (MAC) address of the Ethernet Controller <dl class="section user"><dt></dt><dd>The MAC address contains the hardware address of the system. It is expressed as a 6 byte comma delimited string containg the hardware address of the W5100. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>If you're using the Arduino Ethernet shield, this is printed on the sticker on the bottom of the board </dd></dl>
</li>
<li><code>SUBNET_MASK</code> The subnet mask used for Ethernet communications <dl class="section user"><dt></dt><dd>Modifying this parameter will change teh subnet that the MAC will use to communicate over the network. The default (and most common) subnet mask is <code>255.255.255.0</code> , meaning that for a IP address of <code>192.168.1.100</code> the MAC can communicate directly with only other IP addresses that match <code>192.168.1.xxx</code>. Setting any mit in the subnet mask to a zero defines that bit as a don't care for communicating. </dd></dl>
</li>
</ul>
<h3><a class="anchor" id="hardware_config_parameters_sub_sub"></a>
Hardware Configuration</h3>
<p>This parameter section is used to define the interface parameters for associating component instances with the driver, and for declaring design specific delays and configuration data. </p>
<ul>
<li><code>READ_WRITE_DELAY</code> The number of milliseconds to wait for a read/write operation to complete <dl class="section user"><dt></dt><dd>This option allows for the configuration of the lag time between the SEND/RECEIVE command execution and when the driver polls for the completion status of the transmission. Under normal conditions, it is inadvisable to modify this paramter, however, tweaking the delay time may allow for enanced operation in some applications. </dd></dl>
</li>
<li><code>SPI_INSTANCE</code> The Instance Name of the SPI component <dl class="section user"><dt></dt><dd>Enter the component (instance) name of the SPI component that is used to ommunicate with the W5100. This SPI port should be configured to use 8-bit data, MSB first transmission, and SPI mode 0. The data rate is depentant upon your board layout (EMI/Noise issues), and your processor and bus clock speeds. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>When using the SPIM or SPI mode SCB, this driver requires at least a 4-byte FIFO buffer </dd>
<dd>
This component uses the internal SPI chip select generation to select the W5100. </dd></dl>
</li>
<li><code>SS_NUM</code> the slave select number used to connect to the W5100 (SCB Mode) <dl class="section user"><dt></dt><dd>When using the SCB component, this parameter specifies the slave select (SS) number used to communicate with the W5100 device. Valid values are from 0 to 3, values outside of this range are assumed to be 0 and will use the SS1 pin. </dd></dl>
</li>
</ul>
<h1><a class="anchor" id="api_sec"></a>
Application Programming Iinterface</h1>
<p>The functions of the Application Programming interface (API) provide the ability to configure and operate the W5100 device using your software application. The following sections describe the driver API in detail. </p>
<dl class="section user"><dt></dt><dd>By default, PSoC Creator assigns the name <code>W5100_1</code> to the first instance of the driver component within your project. You may rename the component to any unique name within your project, provided it follows the syntax rules defined within PSoC Creator. The name of the instance becomes the prefix for each global identifier within the driver so that no interface of the driver will interfere with your software project. For simplicity, API references within this document will use the instance name prefix of  W5100. </dd></dl>
<h2><a class="anchor" id="api_func_subsec"></a>
API Functions</h2>
<ul>
<li><a class="el" href="group__w5100.html#ga6fc3e1f0975026bff8ebfa206082f9d3" title="Startup and initialize the device using the creator defaults. ">W5100_Start()</a> : Startup and initialize the device using the creator defaults </li>
<li><a class="el" href="group__w5100.html#ga5e1826cce2338a7fa157087e684d8221" title="initialize device parameters and memory setup ">W5100_Init()</a> : initialize device parameters and memory setup </li>
<li><a class="el" href="group__w5100.html#ga3b5865fbd3ea415f63c9133472f61c60" title="Parse a ASCII Text IPv4 address to an IPv4 Address. ">W5100_ParseIP()</a> : Parse a ASCII Text IPv4 address to an IPv4 Address. </li>
<li><a class="el" href="group__w5100.html#gae9a1d42fb5170d6f9101b3b770662a92" title="re-assign the local IP address of the device ">W5100_SetIP()</a> : re-assign the local IP address of the device </li>
<li><a class="el" href="group__w5100.html#ga8b0c112d373a45e3b6fd98883be31520" title="Read the current IP address of the device. ">W5100_GetIP()</a> : Read the current IP address of the device </li>
<li><a class="el" href="group__w5100.html#ga28e394f647d1a0ac1bcfc35f3e936014" title="Re-assign the hardware address (MAC) of the device. ">W5100_SetMAC()</a> : Re-assign the hardware address (MAC) of the device </li>
<li><a class="el" href="group__w5100.html#ga5816613ac4ca9c73c394cc35db9503db" title="Retrieve the assigned Source hardware (MAC) address of the device. ">W5100_GetMAC()</a> : Retrieve the assigned Source hardware (MAC) address of the device </li>
<li><a class="el" href="group__w5100.html#ga88c03a5eed460dfd79a086643827be04" title="Open a socket using the specified protocol on the specified port. ">W5100_SocketOpen()</a> : Open a socket using the specified protocol on the specified port </li>
<li><a class="el" href="group__w5100.html#ga00fc972eb3d13fc5f035c10a4c459886" title="Close a previously opened socket. ">W5100_SocketClose()</a> : Close a previously opened socket </li>
<li><a class="el" href="group__w5100.html#ga3824b760c33017bfc7ea7f7971bad337" title="Process the socket connection to check for errors and remote closure. ">W5100_SocketProcessConnections()</a> : Process the socket connection to check for errors and remote closure </li>
<li><a class="el" href="group__w5100.html#ga279399a0436c03659cdd0bd19d0db523" title="Check the connection establishment status of the socket. ">W5100_SocketEstablished()</a> : Check the connection establishment status of the socket </li>
<li><a class="el" href="group__w5100.html#ga195a7d41d2d00ea63a11ce46cb9169c6" title="Retrieve the length of waiting Receive data. ">W5100_SocketRxDataWaiting()</a> : Retrieve the length of waiting Receive data </li>
<li><a class="el" href="group__w5100.html#gae566014ff05c4c5e101ed8e624207be1" title="Open an port using the TCP protocol. ">W5100_TcpOpen()</a> : Open an port using the TCP protocol </li>
<li><a class="el" href="group__w5100.html#gaebc374d3ee461294a4c7633e742e3580" title="Start a server listening for connection on an open socket. ">W5100_TcpStartServer()</a> : Start a server listening for connection on an open socket </li>
<li><a class="el" href="group__w5100.html#ga89d917ddcaa5f303edbed324bf1a931c" title="Start a TCP server listening for connections on the specified socket. ">W5100_TcpStartServerWait()</a> : Start a TCP server listening for connections on the specified socket </li>
<li><a class="el" href="group__w5100.html#ga889abb808be4ebcca2fbc5d0b12847a4" title="Open a client connection to a specified IP and port. ">W5100_TcpConnect()</a> : Open a client connection to a specified IP and port </li>
<li><a class="el" href="group__w5100.html#ga021775cb4de8278b875cba930a361810" title="Return the connection status of the TCP socket. ">W5100_TcpConnected()</a> : Return the connection status of the TCP socket </li>
<li><a class="el" href="group__w5100.html#ga16e9f94b3070cb806a8df091ba459fdc" title="Terminate a connection with a remote client/server. ">W5100_TcpDisconnect()</a> : Terminate a connection with a remote client/server </li>
<li><a class="el" href="group__w5100.html#ga3bb43e542856e33199db74e48249825a" title="Transmit a byte packet using the built-in TCP. ">W5100_TcpSend()</a> : Transmit a byte packet using the built-in TCP </li>
<li><a class="el" href="group__w5100.html#gab817270931e205b1fbd492c4bcfce1e7" title="Receive a packet of data using the built-in TCP handler. ">W5100_TcpReceive()</a> : Receive a packet of data using the built-in TCP handler </li>
<li><a class="el" href="group__w5100.html#ga3770465947f4ee4a7671ee3a9431a1b1" title="Send a zero-terminated ASCII string using TCP. ">W5100_TcpPrint()</a> : Send a zero-terminated ASCII string using TCP </li>
<li><a class="el" href="group__w5100.html#ga0dc5ce59aa2c9b214cafaed9930af2eb" title="Open an socket port using the UDP protocol. ">W5100_UdpOpen()</a> : Open a Socket Port using the UDP protocol </li>
<li><a class="el" href="group__w5100.html#ga5d8626d55faeec683139e710537b042f" title="Transmit a byte packet using the built-in UDP. ">W5100_UdpSend()</a> : Transmit a byte packet using the built-in UDP </li>
<li><a class="el" href="group__w5100.html#ga2357033ddb75f2633b528af017274491" title="Receive a packet of data using the built-in UDP handler. ">W5100_UdpReceive()</a> : Receive a packet of data using the built-in p handler </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Nov 4 2013 12:45:20 for E2ForLife_W5100 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
